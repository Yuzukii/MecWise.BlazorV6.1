import{T as e}from"./touch-2ca1b361.js";import{D as t,s as r}from"./dom-a06f5987.js";class n extends HTMLElement{constructor(){super(),this._value=null}get value(){return this._value}send(e,t){try{this._value=JSON.stringify([e,t]),this.dispatchEvent(new Event("change",{bubbles:!0}))}finally{this._value=null}}}class o{static findHeaderElement(e){const t=e;return t?o.isHeaderElement(t)?t:t.closest(`.${o.HeaderElementClassName}`):null}static isHeaderElement(e){return e&&t.hasClassName(e,o.HeaderElementClassName)}static getColumnUniqueId(e){const t=e.dataset.columnUid;return t?Number(t):-1}static getContentElement(e){return e.querySelector(`.${o.HeaderContentClassName}`)}static allowDrag(e){return t.hasClassName(e,o.AllowDragClassName)}static allowGroup(e){const t=e.dataset.allowGroup;return!t||JSON.parse(t)}}o.HeaderElementClassName="dx-grid-header",o.HeaderContentClassName="dx-grid-header-content",o.AllowDragClassName="dx-grid-action",o.DraggableHeaderClassName="dx-grid-draggable-header";class i{static getSvgHtml(e){return`\n<svg class="dx-image" role="img">\n    <use href="_content/DevExpress.Blazor/dx-blazor.svg#${e}"></use>\n</svg>`}}i.ArrowUpIconName="dx-arrow-up";class a{static translate(e,t){return`translate(${Math.floor(e)}px, ${Math.floor(t)}px)`}static translateByPoint(e){return`translate(${Math.floor(e.x)}px, ${Math.floor(e.y)}px)`}}var s;!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(s||(s={}));class l{constructor(){this.downTargetElement=l.addTargetToDom("dx-grid-dragging-down-target"),this.upTargetElement=l.addTargetToDom("dx-grid-dragging-up-target");const e=this.upTargetElement.getBoundingClientRect();this.targetElementSize={width:e.width,height:e.height},this.upTargetElementPosition=null,this.downTargetElementPosition=null,this.hide()}show(){this.upTargetElementPosition&&this.downTargetElementPosition&&(this.downTargetElement.style.transform=a.translateByPoint(this.downTargetElementPosition),this.upTargetElement.style.transform=a.translateByPoint(this.upTargetElementPosition),t.removeClassName(this.downTargetElement,"d-none"),t.removeClassName(this.upTargetElement,"d-none"))}hide(){t.addClassName(this.downTargetElement,"d-none"),t.addClassName(this.upTargetElement,"d-none")}setPositionRelativeToElement(e,t){this.setUpTargetPosition(e,t),this.setDownTargetPosition(e,t)}setUpTargetPosition(e,t){this.upTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y+e.height}}setDownTargetPosition(e,t){this.downTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y-this.targetElementSize.height}}getTargetXCoordinate(e,t){let r=e.x-this.targetElementSize.width/2;return t===s.Right&&(r+=e.width),r}dispose(){l.removeElementsByClassName("dx-grid-dragging-down-target"),l.removeElementsByClassName("dx-grid-dragging-up-target")}static removeElementsByClassName(e){const t=document.querySelectorAll(`.${e}`);for(let e=0;e<t.length;e++)t[e].remove()}static addTargetToDom(e){const t=document.createElement("div");return t.className=e,t.innerHTML=i.getSvgHtml(i.ArrowUpIconName),document.body.appendChild(t),t}}var d;!function(e){e[e.Header=0]="Header",e[e.GroupPanel=1]="GroupPanel"}(d||(d={}));class u{constructor(e){this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.boundOnDocumentScrollHandler=this.onDocumentScroll.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementToDropMouseOutHandler=this.onElementToDropMouseOut.bind(this),this.boundOnGroupPanelMouseMoveHandler=this.onGroupPanelMouseMove.bind(this),this.boundOnEmptyHeaderCellMouseMoveHandler=this.onEmptyHeaderCellMouseMove.bind(this),this.boundOnGroupFreeSpaceMouseMoveHandler=this.onGroupFreeSpaceMouseMove.bind(this),this.draggableContext=null,this.isRefreshUIRequested=!1,this._isLastMouseClickWasRaisedAfterDrag=!1,this.grid=e}get isLastMouseClickWasRaisedAfterDrag(){return this._isLastMouseClickWasRaisedAfterDrag}start(e,t){const r=u.addDraggableHeaderToDOM(e);this.draggableContext=u.createDraggableContext(e,r,t),this._isLastMouseClickWasRaisedAfterDrag=!1,this.updateDraggableElementPosition(),this.addEventSubscriptions()}onDocumentMouseMove(e){this.draggableContext&&(this._isLastMouseClickWasRaisedAfterDrag=!0,this.draggableContext.currentCursorPosition={x:e.pageX,y:e.pageY},this.draggableContext.initialScrollPosition=this.draggableContext.currentScrollPosition,this.updateDraggableElementPosition(),this.refreshUI())}onDocumentScroll(e){this.draggableContext&&(this.draggableContext.currentScrollPosition=u.getDocumentScrollPosition(),this.draggableContext.srcHeaderPosition=u.getElementPosition(this.draggableContext.srcHeaderElement),this.draggableContext.mouseOverElement&&this.setMouseOverElementInfo(this.draggableContext.mouseOverElement),this.updateDraggableElementPosition(),this.refreshUI())}onHeaderMouseMove(e){const t=o.findHeaderElement(e.target);t&&(this.updateDraggableContext(t,e),this.refreshUI())}onGroupPanelMouseMove(){const e=this.grid.getGroupPanelContentContainer();this.onPanelElementMouseMove(e,d.GroupPanel)}onEmptyHeaderCellMouseMove(){const e=this.grid.getEmptyHeaderCellContentContainer();this.onPanelElementMouseMove(e,d.Header)}onGroupFreeSpaceMouseMove(){const e=this.grid.getGroupContentFreeSpaceElement();this.onPanelElementMouseMove(e,d.GroupPanel)}onPanelElementMouseMove(e,t){e&&this.draggableContext&&this.draggableContext.mouseOverElement!==e&&(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableContext.dropArea=t,this.isPossibleDropToCurrentArea()&&(this.draggableContext.isPossibleDropColumn=!0,this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,s.Left)),this.refreshUI())}isPossibleDropToCurrentArea(){var e,t;return(null===(e=this.draggableContext)||void 0===e?void 0:e.dropArea)!==d.GroupPanel||(null===(t=this.draggableContext)||void 0===t?void 0:t.allowGroup)}onElementToDropMouseOut(e){this.clearMoveStateFromDraggableContext(),this.refreshUI()}createColumnMovedHandlerArgs(){if(!this.draggableContext||!this.draggableContext.isPossibleDropColumn)return null;const e=this.draggableContext;return{columnUid:e.columnUid,beforeColumnUid:e.beforeColumnUid,dropArea:e.dropArea}}stop(){var e;this.isRefreshUIRequested=!1,null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),this.draggableContext=null,u.removeDraggableHeaderFromDom(),this.removeEventSubscriptions(),t.removeClassName(document.body,"dx-grid-move-cursor")}updateDraggableContext(e,t){if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext||this.draggableContext.srcHeaderElement===e)return;if(this.setMouseOverElementInfo(e),!this.isPossibleDropToCurrentArea())return;const r=this.isThereCursorInLeftPart(t);if(r&&e.previousElementSibling!==this.draggableContext.srcHeaderElement&&(this.draggableContext.beforeColumnUid=o.getColumnUniqueId(e),this.draggableContext.isPossibleDropColumn=!0),!r&&e.nextElementSibling!==this.draggableContext.srcHeaderElement){const t=e.nextElementSibling;t&&(this.draggableContext.beforeColumnUid=o.getColumnUniqueId(t)),this.draggableContext.isPossibleDropColumn=!0}this.draggableContext.isPossibleDropColumn&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,r?s.Left:s.Right)}getDropColumnArea(e){const t=this.grid.getGroupPanelContentContainer();return t&&u.isThereHeaderInsideGroupPanel(t,e)?d.GroupPanel:d.Header}static isThereHeaderInsideGroupPanel(e,t){const r=e.childNodes.length;for(let n=0;n<r;n++)if(e.childNodes[n]===t)return!0;return!1}refreshUI(){this.isRefreshUIRequested||(this.isRefreshUIRequested=!0,requestAnimationFrame((()=>{this.isRefreshUIRequested=!1;const e=this.draggableContext;e&&(e.headerElement.style.transform=`translate(${Math.round(e.draggableElementPosition.x)}px, ${Math.round(e.draggableElementPosition.y)}px)`,t.addClassName(e.headerElement,"visible"),e.mouseOverElement?e.targets.show():e.targets.hide(),t.addClassName(document.body,"dx-grid-move-cursor"))})))}setMouseOverElementInfo(e){if(!this.draggableContext)return;this.draggableContext.mouseOverElement=e;const t=e.getBoundingClientRect();this.draggableContext.mouseOverElementRect={x:t.left+this.draggableContext.currentScrollPosition.x,y:t.top+this.draggableContext.currentScrollPosition.y,width:t.width,height:t.height},this.draggableContext.dropArea=this.getDropColumnArea(e)}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcHeaderPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcHeaderPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.addEventListener("scroll",this.boundOnDocumentScrollHandler),this.addHeaderEventSubscriptions(),this.addGroupPanelEventSubscriptions(),this.addEmptyHeaderCellEventSubscriptions(),this.addGroupContentFreeSpaceElementEventSubscriptions()}addHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const r=e[t];r.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),r.addEventListener("pointerout",this.boundOnElementToDropMouseOutHandler)}}addEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.addPanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}addGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.addPanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}addGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.addPanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}addPanelElementEventSubscriptions(e,t){e.addEventListener("pointermove",t),e.addEventListener("pointerout",this.boundOnElementToDropMouseOutHandler)}removeEventSubscriptions(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.removeEventListener("scroll",this.boundOnDocumentScrollHandler),this.removeHeaderEventSubscriptions(),this.removeGroupPanelEventSubscriptions(),this.removeEmptyHeaderCellEventSubscriptions(),this.removeGroupContentFreeSpaceElementEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const r=e[t];r.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),r.removeEventListener("pointerout",this.boundOnElementToDropMouseOutHandler)}}removeGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.removePanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}removeEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.removePanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}removeGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.removePanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}removePanelElementEventSubscriptions(e,t){e.removeEventListener("pointermove",t),e.removeEventListener("pointerout",this.boundOnElementToDropMouseOutHandler)}shouldAddEventListenersToGroupPanel(){const e=this.grid.getGroupPanelContentContainer();return!!e&&!(null==e?void 0:e.querySelector(`.${o.HeaderElementClassName}`))}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=`card ${o.DraggableHeaderClassName}`,t.style.width=`${e.clientWidth}px`,t.style.height=`${e.clientHeight}px`;const r=getComputedStyle(e);t.style.padding=r.padding,t.style.font=r.font;const n=o.getContentElement(e).cloneNode(!0);return t.appendChild(n),document.body.appendChild(t),t}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${o.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}static createDraggableContext(e,t,r){const n=u.getDocumentScrollPosition(),i=u.getPointerPosition(r);return{srcHeaderPosition:u.getElementPosition(e),srcHeaderElement:e,headerElement:t,allowGroup:o.allowGroup(e),mouseOverElement:null,mouseOverElementRect:null,isPossibleDropColumn:!1,columnUid:o.getColumnUniqueId(e),beforeColumnUid:null,dropArea:d.Header,initialCursorPosition:i,currentCursorPosition:{x:0,y:0},draggableElementPosition:i,initialScrollPosition:n,currentScrollPosition:n,targets:new l}}clearMoveStateFromDraggableContext(){this.draggableContext&&(this.draggableContext.mouseOverElement=null,this.draggableContext.mouseOverElementRect=null,this.draggableContext.isPossibleDropColumn=!1,this.draggableContext.beforeColumnUid=null)}static getPointerPosition(e){return{x:e.pageX,y:e.pageY}}static getDocumentScrollPosition(){return{x:t.getDocumentScrollLeft(),y:t.getDocumentScrollTop()}}static getElementPosition(e){const{left:t,top:r}=e.getBoundingClientRect();return{x:t,y:r}}}class g{constructor(e){this.cellWidths=[],this.indentCellWidth=null,this.grid=e}lock(){const e=this.grid.getHeaderRow();if(!e)return;this.resetColumnWidths(),this.setIndentCellWidths(),this.populateCellsContext(e.cells);const t=this.grid.getColElements(),r=e.offsetWidth;for(let e=0;e<this.cellWidths.length;e++)t[e].dataset.fixedWidth||(t[e].style.width=this.cellWidths[e]/r*100+"%")}setIndentCellWidths(){if(this.indentCellWidth||(this.indentCellWidth=this.calculateIndentCellWidth()),!this.indentCellWidth)return;const e=this.grid.getColElements();for(let r=0;r<this.cellWidths.length;r++)t.hasClassName(e[r],"dx-grid-indent-cell-size")&&(e[r].style.width=`${this.indentCellWidth}px`,e[r].dataset.skipWidthAnalyze="true")}populateCellsContext(e){if(this.cellWidths=[],this.grid.getEmptyHeaderCellContentContainer())return;const t=this.grid.getColElements();for(let r=0;r<t.length;r++)this.cellWidths.push(e[r].offsetWidth)}resetColumnWidths(){const e=this.grid.getColElements();for(let t=0;t<e.length;t++)g.isFixedWidth(e[t])||(e[t].style.width="")}calculateIndentCellWidth(){const e=this.grid.getColElements();let r=0,n=0;for(let o=0;o<this.cellWidths.length;o++)t.hasClassName(e[o],"dx-grid-indent-cell-size")&&(r++,n+=e[o].offsetWidth);return r>0?n/r:null}static isFixedWidth(e){const t=e.dataset.fixedWidth;return t&&JSON.parse(t)}}var h=function(){function e(){}return e.getAlpha=function(e){return e>>24&255},e.getRed=function(e){return e>>16&255},e.getGreen=function(e){return e>>8&255},e.getBlue=function(e){return 255&e},e.redPartToString=function(t){var r=e.getRed(t).toString(16);return r.length>1?r:"0"+r},e.greenPartToString=function(t){var r=e.getGreen(t).toString(16);return r.length>1?r:"0"+r},e.bluePartToString=function(t){var r=e.getBlue(t).toString(16);return r.length>1?r:"0"+r},e.fromArgbNumber=function(e,t,r,n){return e<<24|t<<16|r<<8|n},e.fromRgbaString=function(e,t){void 0===t&&(t=255);var r=e.replace(/ +/g,"").match(/(rgba?)|(\d+(\.\d+)?%?)|(\.\d+)/g);if(r&&r.length>3){for(var n=[],o=1,i=void 0;i=r[o];o++){var a=-1!==i.indexOf("%")?Math.round(2.55*parseFloat(i)):parseInt(i);if(a<0||a>255)return null;n.push(a)}if(0===e.indexOf("rgba")){if(isNaN(n[3])||n[3]<0||n[3]>1)return null;n[3]<=1&&(n[3]=Math.round(255*n[3]))}else if(n[3])return null;return(255&n[0])<<16|(255&n[1])<<8|255&n[2]|(255&(n.length>3?n[3]:t))<<24}return null},e.fromHashString=function(t,n){return void 0===n&&(n=255),e.isHashColorString(t)?("#"===t.charAt(0)&&(t=t.substr(1)),3===t.length&&(t=r.StringUtils.repeat(t.charAt(0),2)+r.StringUtils.repeat(t.charAt(1),2)+r.StringUtils.repeat(t.charAt(2),2)),parseInt(t,16)|n<<24):null},e.fromColorName=function(t,r){void 0===r&&(r=255);var n=e.colorNames[t.toLowerCase()];return n?e.fromHashString(n,r):null},e.fromString=function(t,r){void 0===r&&(r=255);var n=e.fromRgbaString(t,r);if(null!==n)return n;var o=e.fromHashString(t,r);return null!==o?o:e.fromColorName(t,r)},e.colorToHash=function(t){return"#"+e.redPartToString(t)+e.greenPartToString(t)+e.bluePartToString(t)},e.stringToHash=function(e){var t=this.fromString(e);return null!==t?this.colorToHash(t):null},e.isHashColorString=function(e){return/^#?([0-9a-f]{6})$/i.test(e)||/^#?([0-9a-f]{3})$/i.test(e)},e.isKnownColorName=function(t){return!!e.colorNames[t.toLowerCase()]},e.isGray=function(t){var r=e.getRed(t);return r===e.getGreen(t)&&r===e.getBlue(t)},e.DARK_COLOR=-16777216,e.LIGHT_COLOR=-1,e.colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#00ff00",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",windowtext:"#000000"},e}();Object.defineProperty({ColorUtils:h},"__esModule",{value:!0});class c{constructor(e){this.grid=e}buildStyleSheet(){const e=this.getBackgroundColor();return`\n::slotted(div.card) {\n    ${this.getGroupFooterColorVarDeclaration(e)}\n    ${this.getHeaderColorVarDeclaration(e)}\n    ${this.getFilterColorVarDeclaration(e)}\n    ${this.getFooterColorVarDeclaration(e)}\n    ${this.getPagerRowColorVarDeclaration(e)}\n}\n`}getBackgroundColor(){const e=this.grid.getCardContainer();if(!e)return-1;const t=getComputedStyle(e).backgroundColor;return h.fromRgbaString(t)||-1}getHeaderColorVarDeclaration(e){return c.getElementColorVarDeclaration(this.grid.getHeaderRow(),"--dx-grid-header-color",e,.5)}getFilterColorVarDeclaration(e){return c.getElementColorVarDeclaration(this.grid.getFilterRow(),"--dx-grid-filter-color",e,0)}getGroupFooterColorVarDeclaration(e){return c.getElementColorVarDeclaration(this.grid.getHeaderRow()||this.grid.getFooterRow(),"--dx-grid-group-footer-color",e,.5)}getFooterColorVarDeclaration(e){return c.getElementColorVarDeclaration(this.grid.getFooterRow(),"--dx-grid-footer-color",e,.5)}getPagerRowColorVarDeclaration(e){return c.getElementColorVarDeclaration(this.grid.getPagerRow(),"--dx-grid-pager-color",e,0)}static getElementColorVarDeclaration(e,t,r,n){if(!e)return"";const o=getComputedStyle(e).backgroundColor,i=h.fromRgbaString(o);if(!i)return"";return`${t}: rgb(${(1-n)*h.getRed(r)+n*h.getRed(i)}, ${(1-n)*h.getGreen(r)+n*h.getGreen(i)}, ${(1-n)*h.getBlue(r)+n*h.getBlue(i)});`}}class m{static setLoaded(e){this.setAttribute(e,m.loaded)}static removeLoaded(e){this.removeAttribute(e,m.loaded)}static hasLoaded(e){return null!==e.getAttribute(m.prefix+m.loaded)}static setAttribute(e,t,r=null){e.setAttribute(m.prefix+t,null!=r?r:"")}static removeAttribute(e,t){e.removeAttribute(m.prefix+t)}}m.prefix="data-qa-",m.loaded="loaded";class f extends HTMLElement{constructor(){super(),this.dragging=new u(this),this.columnWidthsLock=new g(this),this.childElementsObserver=new MutationObserver(this.onChildElementsChanged.bind(this)),this.headerElementsObserver=new MutationObserver(this.onGroupPanelHeaderChanged.bind(this)),this.boundOnHeaderCellEndDraggingHandler=this.onHeaderCellEndDragging.bind(this),this.boundOnHeaderCellCancelDraggingHandler=this.onHeaderCellCancelDragging.bind(this),this.boundOnHeaderCellStartDraggingHandler=this.onHeaderCellStartDragging.bind(this),this.boundOnHeaderCellClickHandler=this.onHeaderCellClickHandler.bind(this);const e=this.prepareShadowDom();this.isolatedStyleElement=e.querySelector("style"),this.uiHandlersBridge=null}connectedCallback(){this.initializeComponent(),this.childElementsObserver.observe(this,{childList:!0}),m.setLoaded(this)}disconnectedCallback(){m.removeLoaded(this),this.childElementsObserver.disconnect(),this.headerElementsObserver.disconnect()}getHeaderRow(){return this.querySelector("thead > tr.dx-grid-header-row")}getFilterRow(){return this.querySelector("thead > tr.dx-grid-filter-row")}getHeaderCells(){return this.querySelectorAll(`.${o.HeaderElementClassName}`)}getGroupPanelContentContainer(){return this.querySelector(".dx-grid-group-panel-content-container")}getEmptyHeaderCellContentContainer(){return this.querySelector(".dx-grid-empty-header")}getGroupContentFreeSpaceElement(){return this.querySelector(".dx-grid-group-content-free-space")}getColElements(){return this.querySelectorAll("col")}getFooterRow(){return this.querySelector(".dx-grid-footer-row")}getCardContainer(){return this.querySelector(".card")}getPagerRow(){return this.querySelector(".dx-grid-pager-row")}initializeComponent(){this.uiHandlersBridge=this.querySelector("dxbl-grid-ui-handlers-bridge"),this.buildIsolateStyles(),this.initializeEventSubscriptions(),this.observeHeaderElements(),this.columnWidthsLock.lock()}observeHeaderElements(){const e=this.getGroupPanelContentContainer();e&&this.headerElementsObserver.observe(e,{childList:!0});const t=this.getHeaderRow();t&&this.headerElementsObserver.observe(t,{childList:!0})}onChildElementsChanged(e){for(let r=0;r<e.length;r++)e[r].addedNodes.forEach((e=>{t.hasClassName(e,"card")&&this.initializeComponent()}))}onGroupPanelHeaderChanged(e){for(let t=0;t<e.length;t++)e[t].addedNodes.forEach((e=>{o.isHeaderElement(e)&&this.addEventListenersToHeader(e)})),e[t].removedNodes.forEach((e=>{o.isHeaderElement(e)&&this.removeEventListenersFromHeader(e)}));this.columnWidthsLock.lock()}initializeEventSubscriptions(){const e=this.getHeaderCells();for(let t=0;t<e.length;t++)this.addEventListenersToHeader(e[t])}addEventListenersToHeader(t){t.addEventListener("pointerdown",this.boundOnHeaderCellStartDraggingHandler),t.addEventListener("gotpointercapture",f.onHeaderCellGotPointerCapture),t.addEventListener("pointercancel",this.boundOnHeaderCellCancelDraggingHandler),t.addEventListener("click",this.boundOnHeaderCellClickHandler),t.addEventListener(e.touchMouseDownEventName,f.preventDefaultBrowserBehaviour)}removeEventListenersFromHeader(t){t.removeEventListener("pointerdown",this.boundOnHeaderCellStartDraggingHandler),t.removeEventListener("gotpointercapture",f.onHeaderCellGotPointerCapture),t.removeEventListener("pointercancel",this.boundOnHeaderCellCancelDraggingHandler),t.removeEventListener("click",this.boundOnHeaderCellClickHandler),t.removeEventListener(e.touchMouseDownEventName,f.preventDefaultBrowserBehaviour)}onHeaderCellStartDragging(e){const t=o.findHeaderElement(e.target);t&&o.allowDrag(t)&&(this.dragging.start(t,e),document.addEventListener("pointerup",this.boundOnHeaderCellEndDraggingHandler),document.addEventListener("touchmove",f.preventDefaultBrowserBehaviour,{passive:!1}))}static onHeaderCellGotPointerCapture(e){const t=e.target;t&&t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId)}static preventDefaultBrowserBehaviour(e){e.cancelable&&e.preventDefault()}onHeaderCellClickHandler(e){this.dragging.isLastMouseClickWasRaisedAfterDrag&&e.stopPropagation()}onHeaderCellEndDragging(e){this.onColumnMoved(),this.onHeaderCellCancelDragging(e)}onColumnMoved(){const e=this.dragging.createColumnMovedHandlerArgs();e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("columnMoved",e)}onHeaderCellCancelDragging(e){this.dragging.stop(),document.removeEventListener("pointerup",this.boundOnHeaderCellEndDraggingHandler),document.removeEventListener("touchmove",f.preventDefaultBrowserBehaviour)}prepareShadowDom(){const e=document.createElement("template");e.innerHTML="\n<style></style>\n<slot />";const t=this.attachShadow({mode:"open"});return t.appendChild(e.content),t}buildIsolateStyles(){const e=new c(this);this.isolatedStyleElement.innerHTML=e.buildStyleSheet()}}customElements.define("dxbl-grid",f),customElements.define("dxbl-grid-ui-handlers-bridge",n);const b={loadModule:function(){}};export default b;
