DxBlazorInternal.define("cjs-menu-a1057a39.js",(function(e,t,i){e("./cjs-chunk-c5286524.js"),e("./cjs-chunk-0da7e9be.js");var s=e("./cjs-dom-utils-393f2f58.js"),n=e("./cjs-chunk-843046a9.js"),o=new Map;function a(e,t,i){var n=s.ensureElement(e);if(null!==n){var a=o.get(n);a||(a=new r,o.set(n,a)),a.init(n,t,i)}}var r=function(){this.itemsOffset=0,this.itemsWidth=0,this.itemsMinWidth=0,this.items=[]};r.prototype.init=function(e,t,i){var n=this;if(this.mainElement=e,this.sizeChanged&&(s.unsubscribeElement(this.sizeChanged),this.sizeChanged=null),t.canCollapse&&(t.collapseToIcons||t.collapseToIconsAll||t.collapseToHamburgerMenu)){this.currentWidth=e.offsetWidth,this.menu||(this.menu=new l),this.menu.update(t),this.updateMenuItems(t.items),t.isCollapsed||(this.menu.isVertical?(this.itemsOffset=0,this.itemsWidth=Math.max.apply(Math,this.items.map((function(e){return e.width}))),this.itemsMinWidth=0,this.collapseToHamburgerWidth=-1):(this.itemsOffset=this.calculateItemsOffset(e),this.itemsWidth=this.calculateItemsWidth(),this.itemsMinWidth=this.calculateItemsMinWidth(),this.collapseToHamburgerWidth=this.menu.collapseToIcons||this.menu.collapseToIconsAll?this.itemsMinWidth+this.itemsOffset:this.itemsWidth+this.itemsOffset)),this.sizeChanged=s.subscribeElementContentSize(e,(function(e){return n.resizeMenuItemsByWidth(e.width,i)})),this.resizeMenuItemsByWidth(e.offsetWidth,i);var o=e.querySelector("ul.invisible");o&&s.toggleCssClass(o,"invisible",!1)}else this.increaseAllItems()},r.prototype.dispose=function(){this.sizeChanged&&s.unsubscribeElement(this.sizeChanged)},r.prototype.updateMenuItems=function(e){var t=this,i=[];e&&Array.from(e).forEach((function(e){var s=t.items.find((function(t){return t.id===e.id}));if(!s){var n=t.mainElement.querySelector("[data-dxmenu-item-id="+e.id+"]");s=new h(n)}i.push(s),s.update(e),!s.needUpdateSizes&&s.textElement||t.updeteMenuItemSizes(s)})),this.items=i,this.items.sort((function(e,t){return e.adaptivePriority-t.adaptivePriority}))},r.prototype.updeteMenuItemSizes=function(e){var t=e.element.querySelector("div.dx-menu-item-text-container"),i=s.getCurrentStyle(e.element),n=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.marginLeft)+parseFloat(i.marginRight),o=0,a=e.element.children[0];if(a){i=s.getCurrentStyle(a),n+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.marginLeft)+parseFloat(i.marginRight);for(var r=0;r<a.children.length;r++){var l=a.children[r],h=l.offsetWidth;n+=h,l.isSameNode(t)&&(o=h)}}e.updateSizes(t,n,o)},r.prototype.resizeMenuItemsByWidth=function(e,t){if(this.menu.isCollapsed)(e>this.collapseToHamburgerWidth||!this.menu.collapseToHamburgerMenu)&&t.invokeMethodAsync("OnMenuCollapse",!1);else{var i=e-this.currentWidth;if(this.menu.isVertical)this.menu.collapseToIconsAll&&(i<=0&&this.itemsWidth>e?this.reduceAllItems():this.itemsWidth<e&&this.increaseAllItems());else{if(this.menu.collapseToIcons){var s=this.itemsOffset;this.items.forEach((function(e){s+=e.width,e.canIncrease()&&(s-=e.textWidth)})),i<=0&&s>e?this.reduceItems(e,s):i>=0&&this.increaseItems(e,s)}else if(this.menu.collapseToIconsAll){var n=this.itemsWidth+this.itemsOffset;i<=0&&n>e?this.reduceAllItems():i>=0&&n<e&&this.increaseAllItems()}else this.increaseAllItems();this.menu.collapseToHamburgerMenu&&i<=0&&e<this.collapseToHamburgerWidth&&t.invokeMethodAsync("OnMenuCollapse",!0)}}this.currentWidth=e},r.prototype.reduceItems=function(e,t){for(var i=this.items.length-1;i>=0&&t>e;i--){var s=this.items[i];s.canReduce()&&(s.hideTextElement(),t-=s.textWidth)}},r.prototype.increaseItems=function(e,t){for(var i=0;i<this.items.length;i++){var s=this.items[i];if(s.canIncrease()){if(t+s.textWidth>e)break;s.showTextElement(),t+=s.textWidth}}},r.prototype.reduceAllItems=function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.canReduce()&&t.hideTextElement()}},r.prototype.increaseAllItems=function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.canIncrease()&&t.showTextElement()}},r.prototype.calculateItemsOffset=function(e){var t=e.querySelector(".dxbs-menu ul.nav");return t?t.offsetLeft-e.offsetLeft:0},r.prototype.calculateItemsWidth=function(){var e=0;return this.items.forEach((function(t){return e+=t.width})),e},r.prototype.calculateItemsMinWidth=function(){var e=0;return this.items.forEach((function(t){e+=t.width,t.canCollapse()&&(e-=t.textWidth)})),e};var l=function(){};l.prototype.update=function(e){this.isVertical=e.isVertical,this.isCollapsed=e.isCollapsed,this.canCollapse=e.canCollapse,this.collapseToIcons=e.collapseToIcons,this.collapseToIconsAll=e.collapseToIconsAll,this.collapseToHamburgerMenu=e.collapseToHamburgerMenu};var h=function(e){this.element=e,this.needUpdateSizes=!0};function c(e){e.currentTarget.addEventListener("focusin",u)}function u(e){e.currentTarget.removeEventListener("focusin",u),e.currentTarget.blur()}h.prototype.update=function(e){this.id=e.id,this.canCrop=e.canCrop,this.adaptivePriority=e.adaptivePriority},h.prototype.updateSizes=function(e,t,i){this.needUpdateSizes=!1,this.width=t,this.textWidth=i,this.textElement=e},h.prototype.canCollapse=function(){return this.canCrop&&this.textElement},h.prototype.canReduce=function(){return this.canCollapse()&&!s.elementHasCssClass(this.textElement,"dx-menu-text-hidden")},h.prototype.canIncrease=function(){return this.canCollapse()&&s.elementHasCssClass(this.textElement,"dx-menu-text-hidden")},h.prototype.showTextElement=function(){s.toggleCssClass(this.textElement,"dx-menu-text-hidden",!1)},h.prototype.hideTextElement=function(){s.toggleCssClass(this.textElement,"dx-menu-text-hidden",!0)},i.default={init:a,dispose:function(e){(e=s.ensureElement(e))&&n.disposeEvents(e);var t=o.get(e);return t&&(t.dispose(),o.delete(e)),Promise.resolve("ok")},addNavItemClickHandler:function(e){e.addEventListener("mousedown",c)},resetFocusForDropDownItem:function(){document.activeElement&&"A"===document.activeElement.tagName&&document.activeElement.classList.contains("dropdown-item")&&document.activeElement.blur()}},i.init=a}),["cjs-chunk-c5286524.js","cjs-chunk-0da7e9be.js","cjs-dom-utils-393f2f58.js","cjs-chunk-843046a9.js"]);
