DxBlazorInternal.define("cjs-columnchooser-30f6d8fa.js",(function(n,e,t){n("./cjs-chunk-c5286524.js"),n("./cjs-chunk-0da7e9be.js");var o=n("./cjs-dom-utils-393f2f58.js");n("./cjs-chunk-ad620f3e.js"),n("./cjs-chunk-96905969.js");var c,s,i,a,u,r,l,d,f,p,h=n("./cjs-chunk-b8f9edc9.js"),m=n("./cjs-dragAndDropUnit-7f87e559.js"),v=null,j=-1,g=-1,w=!0,y=!1;function k(n,e,t,c){if(n.forEach((function(n){o.ensureElement(n)})),a?a._id!==c._id&&(I(a),a=c):a=c,!d)for(var l=d=e;l.parentNode!==document&&l.classList;){if(l.classList.contains("modal-body")){y=!0;break}l=l.parentNode}if(u=new Map,r&&r.dispose(),r=new h.EventRegister(d),v||(s=new Map,i=new Map,v=n),g=-1,r.attachEventWithContext(document,"keydown",b,document),v&&(v.sort((function(n,e){return n.dataset.vindex-e.dataset.vindex})),f=function(n,e){if(y)return n;var t=n,o=window.getComputedStyle(t);for(;o.position!==e&&t.parentNode!==document;)t=t.parentNode,o=window.getComputedStyle(t);return t}(d,"absolute"),E(t&&!y),x()))var m=r.attachEvent(f,"focusin",(function(){m.dispose(),v[0].focus()}));M(),p&&(p.parentNode.removeChild(p),p=null)}function E(n){w=n,l&&l.dispose();var e=document.querySelector(".column-chooser-exit-button");l=e?new m.FocusUnit(e,null,d,!w):null,i.forEach((function(n){n.dispose()})),i=new Map,v.forEach((function(n){!function(n,e){var t=s.get(n.dataset.column);t||((t=new m.DragAndDropUnit(n,n.parentNode,z,".column-chooser-drag-icon-owner",B,y)).onDragStart=A,t.onDrag=F,t.onDragCancel=U,t.onDropAnimationEnd=S,s.set(n.dataset.column,t));t.reset(),n.classList.remove("up"),n.classList.remove("down"),n.classList.remove("freeze");var o=i.get(n.dataset.column);o||((o=new m.FocusUnit(n,".custom-control-input",e,y||!w)).onFocus=D,o.onBlur=C,o.onClick=N,i.set(n.dataset.column,o));o.reset()}(n,f)}))}function x(){return w}function b(n){switch(x()||(E(!0),9===n.keyCode&&v[v.length-1].focus()),n.keyCode){case 32:g>=0&&(n.preventDefault(),v[g].click());break;case 38:n.preventDefault(),L(-1);break;case 40:n.preventDefault(),L(1)}}function L(n){if(v&&s){g=(g+=n)<0?v.length-1:g;var e=i.get(v[g%=v.length].dataset.column);e&&e.focus()}}function D(n){g=v.indexOf(n)}function C(n){g===v.indexOf(n)&&(g===v.length-1&&l&&l.focus(),g=-1)}function N(n){x()&&E(!1)}function O(n){return v.find((function(e,t,o){return function(n,e){var t=R(n);if(!t)return!1;return t.top<=e&&e<=t.bottom}(e,n.y)}))}function z(n){var e=O(n);return e?{item:e,relativeRect:R(e)}:null}function M(){if(c&&c.style){var n=s.get(c.dataset.column);n&&n.reset();var e=i.get(c.dataset.column);e&&e.reset(),j=-1,c.childNodes.forEach((function(n){n.style&&(n.style.visibility="")})),c=null}}function A(n){j=v.indexOf(c=n),v.forEach((function(n){n.blur(),n!==c&&n.classList.add("freeze")})),c.childNodes.forEach((function(n){n.style&&(n.style.visibility="hidden")}));var e=i.get(c.dataset.column);e&&e.stop()}function R(n){var e=u.get(n);if(e)return e;var t=m.getClientRect(n),o=B();return e=new m.RectBlz(t.x-o.x,t.y-o.y,t.width,t.height),u.set(n,e),e}function S(n,e){v.forEach((function(n){s.get(n.dataset.column).stop()})),p=d.cloneNode(!0),o.eraseBlazorIdentificators(p),p.style["z-index"]=2e3,d.parentNode.appendChild(p),a.invokeMethodAsync("OnElementsExchange",n.dataset.column,e.dataset.column).catch((function(n){window.console.error(n)}))}function U(n){v.forEach((function(n){n.classList.remove("up"),n.classList.remove("down"),n.classList.remove("freeze")})),M()}function B(){var n=y?d.parentNode:d,e=m.getClientRect(n);return 0!==n.scrollTop?{x:e.x,y:e.y-n.scrollTop}:e.location}function _(n){i.get(n.dataset.column).updateStyleMetadata()}function F(n,e){if(n){-1===j&&(j=v.indexOf(n));var t=O(e.centerOfDraggingObject);if(t){var o=v.indexOf(t),s=!1;v.forEach(j<o?function(n){c===n&&(s=!0),s?(_(n),n.classList.add("up")):n.classList.remove("up","down"),t===n&&(s=!1)}:j>o?function(n){t===n&&(s=!0),s?(_(n),n.classList.add("down")):n.classList.remove("up","down"),c===n&&(s=!1)}:function(n){n.classList.remove("up","down")})}}}function I(n){n._id===a._id&&(s.forEach((function(n){n.dispose()})),i.forEach((function(n){n.dispose()})),v=null,c=null,j=-1,d=null,u=null,s=null,i=null,a=null,r&&r.dispose(),r=null,p&&(p.parentNode.removeChild(p),p=null))}t.default={init:k,dispose:I},t.dispose=I,t.init=k}),["cjs-chunk-c5286524.js","cjs-chunk-0da7e9be.js","cjs-dom-utils-393f2f58.js","cjs-chunk-ad620f3e.js","cjs-chunk-96905969.js","cjs-chunk-b8f9edc9.js","cjs-dragAndDropUnit-7f87e559.js"]);
