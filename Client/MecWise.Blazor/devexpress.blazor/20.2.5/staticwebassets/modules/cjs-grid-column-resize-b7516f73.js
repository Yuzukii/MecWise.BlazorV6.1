DxBlazorInternal.define("cjs-grid-column-resize-b7516f73.js",(function(e,t,i){e("./cjs-chunk-c5286524.js"),e("./cjs-chunk-0da7e9be.js");var n=e("./cjs-dom-utils-393f2f58.js"),o=e("./cjs-chunk-ad620f3e.js"),s=e("./cjs-chunk-96905969.js"),r=e("./cjs-chunk-e9e6b6d6.js"),l=e("./cjs-dx-style-helper-616b781d.js");function h(e){window.dxAccessibilityHelper||(window.dxAccessibilityHelper=new u),window.dxAccessibilityHelper.sendMessageToAssistiveTechnology(e)}var u=function(){this._helperElement=null},a={helperElement:{configurable:!0}};a.helperElement.get=function(){return null==this._helperElement&&(this._helperElement=this.createHelperElement()),this._helperElement},u.prototype.createHelperElement=function(){var e=document.createElement("DIV");return e.className="dxAIFE dxAIFME",e.setAttribute("role","note"),e.setAttribute("aria-live","assertive"),document.documentElement.appendChild(e),e},u.prototype.sendMessageToAssistiveTechnology=function(e){var t=this;this.helperElement.innerHTML=e,setTimeout((function(){t.helperElement.innerHTML=""}),300)},Object.defineProperties(u.prototype,a);var d={Disabled:0,NextColumn:1,Component:2},c=0,m=1,p=2,f=function(e,t,i,n){this._mainElement=e,this._nextHeaderCellElement=e.nextElementSibling,this._blazorComponent=n,this._gridResizeProxy=t,this._mode=i,this._resizeParameters={},this._resizeAnchor=null,this._lastWidth=null,this._lastNextWidth=null,this._timeoutId=null,this._leftMouseXBoundary=null,this._rightMouseXBoundary=null},y={mainElement:{configurable:!0},nextHeaderCellElement:{configurable:!0},hasNextColumn:{configurable:!0},hasColumnId:{configurable:!0},gridResizeProxy:{configurable:!0},blazorComponent:{configurable:!0},resizeAnchor:{configurable:!0},caption:{configurable:!0},isResizeAllowed:{configurable:!0},step:{configurable:!0}};y.mainElement.get=function(){return this._mainElement},y.nextHeaderCellElement.get=function(){return this._nextHeaderCellElement},y.hasNextColumn.get=function(){return!!this._nextHeaderCellElement},y.hasColumnId.get=function(){return this.mainElement.hasAttribute("data-dxdg-column-id")},y.gridResizeProxy.get=function(){return this._gridResizeProxy},y.blazorComponent.get=function(){return this._blazorComponent},y.resizeAnchor.get=function(){return this._resizeAnchor},y.caption.get=function(){return this.mainElement.innerText},y.isResizeAllowed.get=function(){return this._mode!==d.Disabled&&this.hasColumnId&&(this.hasNextColumn||this._mode===d.Component)},y.step.get=function(){var e=Math.ceil((this._resizeParameters.maxWidth-this._resizeParameters.minWidth)/100);return e>5&&(e=5),e},f.prototype.initialize=function(){this.createResizeAnchor(),S().initializeHeaderCellEvents(this),this.initializeEvents()},f.prototype.initializeEvents=function(){this.isResizeAllowed&&(this.mainElement.addEventListener("focus",this.onFocus.bind(this)),this.mainElement.addEventListener("keydown",this.onKeyDown.bind(this)),this.mainElement.addEventListener("keyup",this.onKeyUp.bind(this)))},f.prototype.onFocus=function(e){o.getEventSource(e)===this.mainElement&&(this.onFocusCore(),this._lastWidth=this.mainElement.offsetWidth,this._lastNextWidth=this.hasNextColumn?this.nextHeaderCellElement.offsetWidth:0,this.updateResizeParameters())},f.prototype.onKeyDown=function(e){if(o.getEventSource(e)===this.mainElement)switch(e.keyCode){case r.Key.Left:this.onKeyResize(-this.step),e.stopPropagation(),e.preventDefault();break;case r.Key.Right:this.onKeyResize(this.step),e.stopPropagation(),e.preventDefault()}},f.prototype.onKeyResize=function(e){var t=1500;this.hasNextColumn&&(t=this._lastWidth+this._lastNextWidth);var i=this._lastWidth+e;n.RequestAnimationFrame(function(){this.setWidth(i,t,e)}.bind(this)),this._timeoutId&&clearTimeout(this._timeoutId)},f.prototype.onKeyUp=function(e){var t=this;if(o.getEventSource(e)===this.mainElement){var i=e.keyCode;i===r.Key.Left&&i===r.Key.Right&&(this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout((function(){return t.invokeSetWidth()}),500))}},f.prototype.updateResizeParameters=function(){var e=this.mainElement.offsetWidth,t=this.isResizeAllowed,i=1500;this._mode===d.NextColumn&&(i=e+(this.hasNextColumn?this.nextHeaderCellElement.offsetWidth:0)-30),this._resizeParameters={allowResize:t,minWidth:t?30:e,currentWidth:e,maxWidth:t?i:e}},f.prototype.update=function(e){var t=this.isResizeAllowed;this._nextHeaderCellElement=this.mainElement.nextElementSibling,this._mode=e,this.isResizeAllowed?t||(this.mainElement.appendChild(this._resizeAnchor),S().initializeHeaderCellEvents(this)):t&&(this.mainElement.removeChild(this._resizeAnchor),S().removeHeaderCellEvents(this))},f.prototype.createResizeAnchor=function(){var e=document.createElement("div");n.addClassNameToElement(e,"dxColumnResizeAnchor"),e.dxResizableHeaderCell=this,this._resizeAnchor=e,this.mainElement.appendChild(e)},f.prototype.onMouseDown=function(){this.setMouseBoundaries(),this.onFocusCore()},f.prototype.setMouseBoundaries=function(){var e=this.mainElement.getBoundingClientRect(),t=Math.min(30,e.width);if(this._leftMouseXBoundary=e.left+t-10,this._mode===d.NextColumn){var i=this.nextHeaderCellElement.getBoundingClientRect();this._rightMouseXBoundary=e.right+i.width-30}},f.prototype.removeMouseBoundaries=function(){this._leftMouseXBoundary=null,this._rightMouseXBoundary=null},f.prototype.getResizeType=function(e){return e<=this._leftMouseXBoundary?m:this._rightMouseXBoundary&&e>=this._rightMouseXBoundary?p:c},f.prototype.onFocusCore=function(){this.isResizeAllowed&&(this.ensureWidthSyncronized(),h("Width is "+this.mainElement.offsetWidth+" pixels. Use arrow keys to resize."))},f.prototype.onDragResizeAnchor=function(e,t){if(this.isResizeAllowed){var i=this.getResizeType(t),n=this.mainElement.offsetWidth,o=this.getNewWidth(n,e,i);this.setWidth(o,this.hasNextColumn?n+this.nextHeaderCellElement.offsetWidth:null,e)}},f.prototype.getNewWidth=function(e,t,i){switch(i){case m:return Math.min(30,e);case p:return e+this.nextHeaderCellElement.offsetWidth-30;default:return e+t}},f.prototype.onDragResizeAnchorStop=function(){this.removeMouseBoundaries(),this.invokeSetWidth()},f.prototype.setWidth=function(e,t,i){if(!this.isWidthChanged(e)||!this.isValidWidth(e,t,i))return!1;var o=function(e){if("border-box"===window.getComputedStyle(e,null).getPropertyValue("box-sizing"))return 0;return n.getLeftRightPaddings(e)}(this.mainElement),s=t-(e-=o)-o;return this._lastWidth=e,this._lastNextWidth=s,this.gridResizeProxy.setWidth(this._mode,e,s),!0},f.prototype.isWidthChanged=function(e){return e!==this._lastWidth},f.prototype.invokeSetWidth=function(){var e=this;this._lastWidth&&this._lastNextWidth&&(this.gridResizeProxy.resetWidth(),S().lockResize(),this.blazorComponent.invokeMethodAsync("SetColumnWidths",C(this.mainElement),this._lastWidth,C(this.nextHeaderCellElement),this._lastNextWidth).then((function(){e._lastWidth=null,e._lastNextWidth=null,S().unlockResize()})))},f.prototype.isValidWidth=function(e,t,i){var n=e>=30||i>0;return n&&this._mode!==d.Component&&(n=e<=t-30),n},f.prototype.ensureWidthSyncronized=function(){if(!this.isWidthSyncronized()){var e=this.gridResizeProxy;this.blazorComponent.invokeMethodAsync("GetCellCache").then((function(t){e.syncronizeWidth(t)}))}},f.prototype.isWidthSyncronized=function(){var e=!1,t=this.gridResizeProxy.getColElementInlineWidth();0===t?e=!0:e=t===this.mainElement.offsetWidth;return e},Object.defineProperties(f.prototype,y);var g=function(e,t){this.mainElement=e,this.update(t)},E={colElements:{configurable:!0},elementsToSetComponentWidth:{configurable:!0},elementsToSyncWidth:{configurable:!0},elementsToCheckScroll:{configurable:!0},elementsToReset:{configurable:!0}};E.colElements.get=function(){return M(this._colElements,this._resizeElements.colElements)},E.elementsToSetComponentWidth.get=function(){return M(this._elementsToSetComponentWidth,this._resizeElements.elementsToSetComponentWidth)},E.elementsToSyncWidth.get=function(){return M(this._elementsToSyncWidth,this._resizeElements.elementsToSyncWidth)},E.elementsToCheckScroll.get=function(){return M(this._elementsToCheckScroll,this._resizeElements.elementsToCheckScroll)},E.elementsToReset.get=function(){return M(this._elementsToReset,this._resizeElements.elementsToReset)},g.prototype.update=function(e){this._resizeElements=e,this._colElements=null,this._elementsToSetComponentWidth=null,this._elementsToSyncWidth=null,this._elementsToCheckScroll=null,this._elementsToReset=null},g.prototype.setWidth=function(e,t,i){h(t+" pixels"),this.setComponentWidth(t),this.colElements.forEach((function(n){n.style.width=w(t),e===d.NextColumn&&(n.nextElementSibling.style.width=w(i))}))},g.prototype.setComponentWidth=function(e){if(this.elementsToSetComponentWidth&&!this.isScrollExists()){var t=e-this.mainElement.offsetWidth,i=[];this.elementsToSetComponentWidth.forEach((function(e){return i.push(new z(e,e.offsetWidth+t))})),this.elementsToSyncWidth&&i.push(new z(this.elementsToSyncWidth[0],this.elementsToSyncWidth[1].offsetWidth+t)),i.forEach((function(e){return e.apply()}))}},g.prototype.isScrollExists=function(){var e=this.elementsToCheckScroll;if(e)return e[0].clientWidth<e[1].clientWidth},g.prototype.getColElementInlineWidth=function(){for(var e=0,t=this.colElements,i=0;i<t.length;i++){var n=t[i].style.width;if(""!==n){e=parseInt(n);break}}return e},g.prototype.syncronizeWidth=function(e){n.RequestAnimationFrame((function(){for(var t=e.map((function(e){var t=n.ensureElement(e[0]);return t?{width:t.offsetWidth,cols:T(e[1])}:null})).filter((function(e){return e})),i=0;i<t.length;i++)for(var o=t[i].cols,s=0;s<o.length;s++)o[s].style.width=w(t[i].width)}))},g.prototype.resetWidth=function(){this.elementsToReset&&!this.isScrollExists()&&this.elementsToReset.forEach((function(e){e.style.width=null}))},Object.defineProperties(g.prototype,E);var z=function(e,t){this._element=e,this._width=t};z.prototype.apply=function(){this._element.style.width=w(this._width)};var v=function(){this._pageX=-1,this._resizeLock=0,this._resizableHeaderCell=null},_={pageX:{configurable:!0},resizableHeaderCell:{configurable:!0}};function C(e){return e?e.getAttribute("data-dxdg-column-id").split("|")[0]:(-1).toString()}function W(e){return Math.round(e.pageX||e.changedTouches&&e.changedTouches[0].pageX||0)}function x(e){var t=S(),i=o.getEventSource(e).dxResizableHeaderCell;if(i&&i.isResizeAllowed){var n=W(e);t.onMouseDown(i,n)}}function b(e){var t=S();if(!t.isResizeLocked()&&-1!==t.pageX){var i=W(e),o=i-t.pageX;if(t.pageX=i,0!==o){var s=t.resizableHeaderCell;s&&n.RequestAnimationFrame((function(){s.onDragResizeAnchor(o,i)}))}}}function R(){var e=S();e.resizableHeaderCell.onDragResizeAnchorStop(),e.invalidateState(),document.removeEventListener(s.TouchUIHelper.touchMouseMoveEventName,b),document.removeEventListener(s.TouchUIHelper.touchMouseUpEventName,R)}function w(e){return e+"px"}function M(e,t){return t?(e||(e=T(t)),e):null}function T(e){return e.map((function(e){return document.getElementById(e)}))}function S(){return null===window.dxResizeEventManagerInstance&&(window.dxResizeEventManagerInstance=new v),window.dxResizeEventManagerInstance}_.pageX.get=function(){return this._pageX},_.pageX.set=function(e){this._pageX=e},_.resizableHeaderCell.get=function(){return this._resizableHeaderCell},v.prototype.initializeHeaderCellEvents=function(e){this.initializeMouseDown(e.resizeAnchor)},v.prototype.initializeMouseDown=function(e){e.addEventListener(s.TouchUIHelper.touchMouseDownEventName,x)},v.prototype.initializeMouseMove=function(){document.addEventListener(s.TouchUIHelper.touchMouseMoveEventName,b)},v.prototype.initializeMouseUp=function(){document.addEventListener(s.TouchUIHelper.touchMouseUpEventName,R)},v.prototype.removeHeaderCellEvents=function(e){e.resizeAnchor.removeEventListener(s.TouchUIHelper.touchMouseDownEventName,x)},v.prototype.onMouseDown=function(e,t){this._resizableHeaderCell=e,e.onMouseDown(),this.pageX=t,this.initializeMouseMove(),this.initializeMouseUp()},v.prototype.lockResize=function(){this._resizeLock++},v.prototype.unlockResize=function(){this._resizeLock--},v.prototype.isResizeLocked=function(){return this._resizeLock>0},v.prototype.invalidateState=function(){this._pageX=-1,this._resizableHeaderCell=null},Object.defineProperties(v.prototype,_),window.dxResizeEventManagerInstance=null;var A=new Map;function H(e,t,i,o){if(e=n.ensureElement(e)){var s=A.get(e);if(s)s.update(i),s.gridResizeProxy.update(t);else{var r=new g(e,t);(s=new f(e,r,i,o)).isResizeAllowed&&(s.initialize(),A.set(e,s))}return l.ensureAccentColorStyle(),Promise.resolve("ok")}}var k={initResizeColumn:H};i.ColumnResizeMode=d,i.default=k,i.initResizeColumn=H,i.minColumnWidth=30}),["cjs-chunk-c5286524.js","cjs-chunk-0da7e9be.js","cjs-dom-utils-393f2f58.js","cjs-chunk-ad620f3e.js","cjs-chunk-96905969.js","cjs-chunk-e9e6b6d6.js","cjs-dx-style-helper-616b781d.js"]);
