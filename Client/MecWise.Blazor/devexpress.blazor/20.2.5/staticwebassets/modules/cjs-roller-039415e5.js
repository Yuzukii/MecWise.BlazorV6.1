DxBlazorInternal.define("cjs-roller-039415e5.js",(function(t,e,i){t("./cjs-chunk-c5286524.js"),t("./cjs-chunk-0da7e9be.js");var n=t("./cjs-dom-utils-393f2f58.js"),o=t("./cjs-chunk-e9e6b6d6.js"),s=t("./cjs-chunk-62a77fef.js");function r(t){return t*(2-t)}function a(t){return t/Math.abs(t)}function l(t,e,i,n){var o=null;function s(t){return o?o(t):0}function r(){o=null}function a(t,n,s){o=function(t,e,i,n,o){var s=e+i,r=0;return function(a,l){if(l)return l(t-r,a,n(a/s));if(!(a<e)){a>=s&&o&&o();var u=t*n((Math.min(a,s)-e)/i)-r;return r+=u,u}}}(n+t,s,e,i,r)}function l(t){null===o?(a(t.value,0,t.timeStamp),n(s)):o(t.timeStamp,(function(e,i){return a(t.value,e,i)}))}return t.subscribe(l),function(){o=null,t.unsubscribe(l)}}function u(t,e,i,o,r){var u,h,c,m,p,d=function(t,e,i){var n=new s.Emitter;return t.addEventListener(e,(function(t){t.preventDefault();var e=i(t);0===e||isNaN(e)||n.emit({value:e,timeStamp:t.timeStamp})}),!1),n}(t,"wheel",(function(t){return a(t.deltaY)*e}));l((u=d,h=30,c=new s.Emitter,m=0,p=1,u.subscribe((function(t){(0===m||t.timeStamp>=m||a(t.value)!==p)&&(m=t.timeStamp+h,p=a(t.value),c.emit(t))})),c),300,i,(function(t){r(new Promise((function(e,i){!function t(e,i){n.RequestAnimationFrame((function(n){var s=e(n);0!==s?(void 0!==s&&o(s),t(e,i)):i()}))}(t,e)})))}))}var h=window.console;function c(t,e,i){var n=i(t);return n?e||n.visible.value?n:c(n,e,i):null}function m(t,e){var i,n,o=-1===e?"prevItem":"nextItem";return t[o]?t[o]:t[o]=(n=t.value+e*(i=t.collection).delta,-1===e&&-1!==i.min&&n<i.min?i.needLoop?new d(i,i.max,!1,null,t):null:1===e&&-1!==i.max&&n>i.max?i.needLoop?new d(i,i.min,!1,t,null):null:new d(i,n,!1))}var p=function(t,e,i,n,o,r){var a=this;this.collection=t,this.prevItem=o,this.nextItem=r,this.value=e,this.visible=i||new s.Subject(!0),this.selected=new s.Subject(!!n),o&&(o.nextItem=this),r&&(r.prevItem=this),this.displayText=new s.Subject(e);var l=this.collection.selectedItem;this.selected.subscribe((function(t){t&&(l.value&&l.value.selected.update(!1),l.update(a))})),this.visible.subscribe((function(t){!t&&a.selected.value&&a.getPrevious().selected.update(!0),a.collection.visibleItemsChanged.emit()}),!0)};p.prototype.getPrevious=function(t){return c(this,t,(function(t){return t.prevItem}))},p.prototype.getNext=function(t){return c(this,t,(function(t){return t.nextItem}))},p.prototype.getDisplayText=function(){return this.displayText.value||this.value};var d=function(t){function e(e,i,n,o,s){t.call(this,e,i,null,n,o,s)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getPrevious=function(t){return m(this,-1)},e.prototype.getNext=function(t){return m(this,1)},e}(p),f=function(t){function e(e,i){t.call(this,e,i,!0)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(d),v=function(t){void 0===t&&(t=!0),this.needLoop=t,this.items=[],this.selectedItem=new s.Subject,this.visibleItemsChanged=new s.Emitter};v.createCollection=function(t,e,i){void 0===i&&(i=!0);for(var n=new v(i),o=0;o<e.length;o++)n.add(o+1,null,o+1===t).displayText.value=e[o];return n.initialize(t),n},v.createGenerator=function(t,e,i,n,o){void 0===o&&(o=!0);var s=new b(e,i,n,o);return s.initialize(t),s},v.prototype.initialize=function(t){this.items.filter((function(e){return e.value===t}))[0].selected.update(!0),this.needLoop&&(this.items[0].prevItem=this.items[this.items.length-1],this.items[this.items.length-1].nextItem=this.items[0])},v.prototype.add=function(t,e,i){var n=new p(this,t,e,i,this.items[this.items.length-1]);return this.items.push(n),n};var b=function(t){function e(e,i,n,o){t.call(this,o),this.min=e,this.max=i,this.delta=n,this.originItem=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialize=function(t){this.originItem=new f(this,t)},e}(v),g=function(t,e,i,n,o){this.displayTextSubscription=this.displayTextSubscription.bind(this),this.roller=i,this.prevItem=o,this.nextItem=null,this.index=e,this.elements=i.createRollerItemElements(),this.offset=e*n,this.height=n,this.position=0,this.visibleItemCount=i.visibleItemCount,o&&(o.nextItem=this),this.updateDataItem(t),this.selectItem=this.selectItem.bind(this)};function I(t,e){t.innerText=e}function C(t,e,i){var n=i(t);return Math.abs(Math.round(n.position-t.position))===e?[n].concat(C(n,e,i)):[]}function y(t,e,i){0!==t.length&&(t.shift().updateDataItem(e),y(t,i(e),i))}g.prototype.initialize=function(t){var e=this,i=Math.floor(this.visibleItemCount/2);this.elements[1].style.top=(this.index-i)*this.height+"px",t.appendChild(this.elements[1]),this.move(this.offset),this.elements[0].addEventListener("click",(function(t){n.RequestAnimationFrame(e.selectItem)}))},g.prototype.isSelected=function(){return Math.floor(this.visibleItemCount/2)*this.height===Math.round(this.position)},g.prototype.selectItem=function(t){var e=this;if(this.dataItem){var i=Math.floor(this.visibleItemCount/2);return this.roller.afterMove(w(s.Subscription.Empty,(function(t){return e.roller.move(t)}),{divisor:this.roller.itemSize.height,startTimestamp:t,endTimestamp:t+300,easing:r,frameCallback:n.RequestAnimationFrame,value:(i-this.index)*this.height-(this.position-this.offset)}))}},g.prototype.move=function(t){this.updatePosition(t);var e=this.position-this.offset;this.elements.forEach((function(t){return t.style.transform="matrix(1, 0, 0, 1, 0, "+e+")"}))},g.prototype.updatePosition=function(t){this.position+=t,this.position>this.visibleItemCount*this.height?(this.position-=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.nextItem.dataItem?this.nextItem.dataItem.getPrevious():null)):this.position<-1*this.height&&(this.position+=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.prevItem.dataItem?this.prevItem.dataItem.getNext():null))},g.prototype.updateDataItem=function(t){this.dataItem!==t&&(this.dataItem&&this.dataItem.displayText.unsubscribe(this.displayTextSubscription),this.dataItem=t,this.dataItem?this.dataItem.displayText.subscribe(this.displayTextSubscription):this.displayTextSubscription(""))},g.prototype.displayTextSubscription=function(t){this.elements.forEach((function(e){return I(e,t)}))},g.prototype.raiseChanges=function(){this.isSelected()&&this.dataItem.selected.update(!0)};var x=function(t,e,i,n,o,s){this.itemCollection=t,this.visibleItemCount=e,this.itemContainers=[],this.itemSize=n,this.caption=o,this.longestVisibleDisplayText=s,this.needLoop=t.needLoop,this.container=i,this.rollerElement=null,this.rollerContainer=null,this.move=this.move.bind(this),this.moveReversed=this.moveReversed.bind(this),this.afterMove=this.afterMove.bind(this)};function w(t,e,i){return new Promise((function(n,o){function s(){t.unsubscribe(s),o()}t.subscribe(s,!0);var r=0,a=i.frameCallback;a((function o(l){if(l<i.endTimestamp){var u=i.easing((l-i.startTimestamp)/(i.endTimestamp-i.startTimestamp)),h=i.value*u-r;e(h),r+=h,a(o)}else t.unsubscribe(s),e(i.value-r),n()}))}))}function S(t,e,i,n,o,s){var a,l,u,h,c=1,m=i.accelerationTimeFrame||300;function p(t){l=0,u=t,c=1}t.subscribe((function(d){s((function(f){h||(h=!0,p(f),o(new Promise((function(o,a){e.subscribe((function a(u){e.unsubscribe(a),w(t,n,function(t){var e=Math.abs(l%i.divisor);return{value:(i.divisor-e)*Math.sign(l),endTimestamp:t+300,startTimestamp:t,easing:r,frameCallback:s}}(u)).then((function(){h=!1,o()})).catch((function(){e.subscribe(a)})).finally(p)}))})))),n(function(t,e){return(e*=c)>=a&&t-u<=m&&(c=Math.min(2,1.2*c)),l+=e,a=e,u=t,e}(f,d))}))}))}function z(t){return t.value%4==0&&t.value%100!=0||t.value%400==0}function T(t){return 2!==t.value}function E(t){return-1!==[1,3,5,7,8,10,12].indexOf(t.value)}x.prototype.initialize=function(){var t=this;this.initializeRollerElements();for(var e=[this.itemCollection.selectedItem.value];e.length<this.visibleItemCount;)e.splice(0,0,e[0]?e[0].getPrevious():null),e.push(e[e.length-1]?e[e.length-1].getNext():null);e.push(e[e.length-1]?e[e.length-1].getNext():null);for(var i=0;i<e.length;i++)this.itemContainers.push(new g(e[i],i,this,this.itemSize.height,this.itemContainers[this.itemContainers.length-1]));this.longestVisibleDisplayText&&I(this.createRollerItemElement("roller-item expander"),this.longestVisibleDisplayText);var a=this.createRollerItemElement("roller-after");this.itemContainers[0].prevItem=this.itemContainers[this.itemContainers.length-1],this.itemContainers[this.itemContainers.length-1].nextItem=this.itemContainers[0];for(var l=0;l<this.itemContainers.length;l++)this.itemContainers[l].initialize(a);this.itemCollection.selectedItem.subscribe((function(){return t.updateVisibleDataItems()}),!0),this.itemCollection.visibleItemsChanged.subscribe((function(){return t.updateVisibleDataItems()}),!0),u(this.rollerElement,this.itemSize.height,r,this.moveReversed,this.afterMove),function(t,e,i,o){var r=new s.Emitter,a=new s.Emitter,l=0;t.addEventListener("touchstart",(function(t){l=t.touches[0].clientY}),!1),t.addEventListener("touchend",(function(t){l=0,n.RequestAnimationFrame((function(t){return a.emit(t)}))}),!1),t.addEventListener("touchmove",(function(t){t.preventDefault();var e=t.changedTouches[0].clientY;r.emit(e-l),l=e}),!1),S(r,a,{divisor:e},i,o,n.RequestAnimationFrame)}(this.rollerElement,this.itemSize.height,this.move,this.afterMove),this.rollerContainer.addEventListener("keydown",(function(e){var i=null;e.keyCode===o.Key.Up?i=t.itemCollection.selectedItem.value.getPrevious():e.keyCode===o.Key.Down&&(i=t.itemCollection.selectedItem.value.getNext()),i&&(e.preventDefault(),i.selected.update(!0))}))},x.prototype.initializeRollerElements=function(){var t=this.rollerContainer=document.createElement("SPAN");t.className="roller-container",t.style.minWidth=this.itemSize.width;var e=document.createElement("SPAN");e.innerText=this.caption,e.className="roller-title",t.appendChild(e);var i=this.rollerElement=document.createElement("A");i.href="javascript:;",i.className="roller",i.style.height=this.itemSize.height*this.visibleItemCount+"px",t.appendChild(i),this.container&&this.container.appendChild(t)},x.prototype.updateVisibleDataItems=function(){var t=this.itemContainers.filter((function(t){return t.isSelected()}))[0];if(t){var e=C(t,this.itemSize.height,(function(t){return t.prevItem})),i=C(t,this.itemSize.height,(function(t){return t.nextItem})),n=this.itemCollection.selectedItem.value;t.updateDataItem(n),y(e.concat([]),n.getPrevious(),(function(t){return t?t.getPrevious():null})),y(i.concat([]),n.getNext(),(function(t){return t?t.getNext():null}))}},x.prototype.createRollerItemElement=function(t){var e=document.createElement("SPAN");return e.className=t||"roller-item",this.rollerElement.appendChild(e),e},x.prototype.createRollerItemElements=function(){var t=this.createRollerItemElement();return[t,t.cloneNode()]},x.prototype.moveReversed=function(t){this.move(0-t)},x.prototype.move=function(t){if(0!==t){var e=Math.sign(t),i=this.itemContainers.length-1,n=-1===e?i:0,o=(-1===e?0:i)+e;if(!this.needLoop){if(1===e)for(var s=Math.floor(this.visibleItemCount/2)*this.itemSize.height,r=n;r!==o;r+=e)!this.itemContainers[r].dataItem&&this.itemContainers[r].position+this.itemSize.height-s<=0&&this.itemContainers[r].position+this.itemSize.height+t-s>0&&(t=Math.min(s-(this.itemContainers[r].position+this.itemSize.height),t));else for(var a=(Math.floor(this.visibleItemCount/2)+1)*this.itemSize.height,l=n;l!==o;l+=e)!this.itemContainers[l].dataItem&&this.itemContainers[l].position-a>=0&&this.itemContainers[l].position+t-a<0&&(t=Math.max(a-this.itemContainers[l].position,t));if(0===t)return}for(var u=n;u!==o;u+=e)this.itemContainers[u].move(t)}},x.prototype.afterMove=function(t){var e=this;return t.then((function(){return Promise.resolve(e.itemContainers.forEach((function(t){return t.raiseChanges()})))}))};var M=0,j=1,D=2,k=3,R=4,N=5;function P(t,e,i,n,o,s){var r=t.add(e,i,n);o.length>0&&s.subscribe((function(t){var i=o[A(t[1].value,t[0].value,e)];r.displayText.update(e+" "+i)}))}function A(t,e,i){return new Date(t,e-1,i).getDay()}function L(t){return t&&t.length?" "+t.concat([]).sort((function(t,e){return e.length-t.length}))[0]:""}var _=1,F=2,G=0,V=1,Y=2,q=3;function O(t,e,i){if(e){var n=e.time;if(n){var o=e.twelveHourFormat,s=o?n.hours%12:n.hours;o&&0===s&&(s=12);var r=n.minutes,a=n.seconds,l=n.hours>=12?F:_,u=v.createGenerator(a,0,59,1),c=v.createGenerator(r,0,59,1),m=o?v.createGenerator(s,1,12,1):v.createGenerator(s,0,23,1),p=null;e.ampmDesignators&&e.ampmDesignators[0]&&e.ampmDesignators[1]&&(p=v.createCollection(l,e.ampmDesignators,!1));var d=document.createDocumentFragment(),f=document.createElement("STYLE");return f.type="text/css",f.innerText=".roller { height: 180px; } .roller-item, .roller-after { height: 36px; } .roller-item, .roller-title { color: "+window.getComputedStyle(t).color+" !important; } .roller-after { background-color: "+window.getComputedStyle(t.parentNode.parentNode).backgroundColor+";}",d.appendChild(f),e.items.forEach((function(t){switch(t.type){case G:new x(m,5,d,{width:"",height:36},"Hour","15").initialize();break;case V:new x(c,5,d,{width:"",height:36},"Minute","55").initialize();break;case Y:new x(u,5,d,{width:"",height:36},"Second","55").initialize();break;case q:if(p)new x(p,5,d,{width:"",height:36},"AM/PM","AM").initialize()}})),m.selectedItem.subscribe(b((function(t){s=t.value}))),c.selectedItem.subscribe(b((function(t){r=t.value}))),u.selectedItem.subscribe(b((function(t){a=t.value}))),p&&p.selectedItem.subscribe(b((function(t){l=t.value}))),U.set(t,new W(m,c,u,p)),t.appendChild(d),Promise.resolve()}}function b(t){return function(e){t(e),i.invokeMethodAsync("UpdateDateTime",[s,r,a,l]).catch((function(t){return h.error(t)}))}}}var U=new WeakMap,W=function(t,e,i,n){this.hoursCollection=t,this.minutesCollection=e,this.secondsCollection=i,this.AMPMCollection=n};W.prototype.update=function(t){if(this.AMPMCollection){var e=this.AMPMCollection?t.hours%12:t.hours;this.hoursCollection.initialize(e=0===e?12:e),this.AMPMCollection.initialize(t.hours>=12?F:_)}else this.hoursCollection.initialize(t.hours);this.minutesCollection.initialize(t.minutes),this.secondsCollection.initialize(t.seconds)};var H=function(t,e,i){this.yearsCollection=t,this.monthsCollection=e,this.daysCollection=i};function K(t,e){U.has(t)&&U.get(t).update(e)}H.prototype.update=function(t){var e=t.filter((function(t){return t.type===j||t.type===D||t.type===M}))[0],i=t.filter((function(t){return t.type===k||t.type===R}))[0],n=t.filter((function(t){return t.type===N}))[0];this.yearsCollection.initialize(n.value),this.monthsCollection.initialize(i.value),this.daysCollection.initialize(e.value)};var B={initializeDateRoller:function(t,e,i,n,o){var s=e.items.filter((function(t){return t.type===j||t.type===D||t.type===M}))[0],r=e.items.filter((function(t){return t.type===k||t.type===R}))[0],a=e.items.filter((function(t){return t.type===N}))[0],l=e.monthNames||[],u=e.dayNames||[];s=void 0!==s?s.value:1,void 0===r?(l=["","","","","","","","","","","",""],r=i):r=r.value;for(var c=v.createGenerator(a=void 0===a?n:a.value,-1,-1,1),m=v.createCollection(r,l),p=m.selectedItem.asTrigger(T),d={29:c.selectedItem.asTrigger(z).or(p),30:p,31:m.selectedItem.asTrigger(E)},f=m.selectedItem.join(c.selectedItem),b=new v,g=1;g<=31;g++)P(b,g,d[g],g===s,u,f);b.initialize(s);var I=["25"+L(u),L(l),"0000"].reduce((function(t,e){return t.length>e.length?t:e})),C=document.createDocumentFragment(),y=document.createElement("STYLE");function w(t){return function(e){t(e),o.invokeMethodAsync("UpdateDateTime",[s,r,a]).catch((function(t){return h.error(t)}))}}return y.type="text/css",y.innerText=".roller { height: 180px; } .roller-item, .roller-after { height: 36px; } .roller-item, .roller-title { color: "+window.getComputedStyle(t).color+" !important; } .roller-after { background-color: "+window.getComputedStyle(t.parentNode.parentNode).backgroundColor+";}",C.appendChild(y),e.items.forEach((function(t){switch(t.type){case M:case D:case j:new x(b,5,C,{width:"",height:36},"Day",I).initialize();break;case R:case k:new x(m,5,C,{width:"",height:36},"Month",I).initialize();break;case N:new x(c,5,C,{width:"",height:36},"Year",I).initialize()}})),t.appendChild(C),b.selectedItem.subscribe(w((function(t){s=t.value}))),m.selectedItem.subscribe(w((function(t){r=t.value}))),c.selectedItem.subscribe(w((function(t){a=t.value}))),U.set(t,new H(c,m,b)),Promise.resolve()},initializeTimeRoller:O,updateRoller:K};i.Roller=x,i.RollerItem=p,i.RollerItemCollection=v,i.attachInputSource=S,i.default=B,i.getDayOfWeek=A,i.initializeTimeRoller=O,i.updateRoller=K}),["cjs-chunk-c5286524.js","cjs-chunk-0da7e9be.js","cjs-dom-utils-393f2f58.js","cjs-chunk-e9e6b6d6.js","cjs-chunk-62a77fef.js"]);
