import"./esm-chunk-d81494b9.js";import"./esm-chunk-a2731447.js";import{ensureElement as e,elementIsInDOM as t}from"./esm-dom-utils-0e4190ff.js";import{a as o,d as n}from"./esm-chunk-9c16a801.js";import{d as s,r}from"./esm-chunk-f1e43abb.js";import{T as c}from"./esm-chunk-1b6abd73.js";import{K as u}from"./esm-chunk-808bf349.js";import{getDropDownElement as i,onOutsideClick as a,isDropDownVisible as m}from"./esm-dropdowns-bf187630.js";import{scrollToFocusedItem as d,getParametersForVirtualScrollingRequest as l}from"./esm-grid-84cea811.js";import"./esm-grid-column-resize-81963b84.js";import"./esm-dx-style-helper-e7dc0266.js";import"./esm-popup-utils-f634e322.js";import"./esm-focus-utils-b9e104a7.js";import"./esm-chunk-d4fc448c.js";import"./esm-dragAndDropUnit-06605dbe.js";import{k as f,a as p}from"./esm-chunk-30985063.js";function y(e){const t=i(e);d(t)}function k(t){t=e(t),document.activeElement===t&&b(t)}function C(e,t){e.dataset.timerId&&(clearTimeout(e.dataset.timerId),delete e.dataset.timerId),t||setTimeout((function(){C(e,!0)}),100)}function b(e){e&&e.dataset.focusedClass&&(e.className=e.dataset.focusedClass)}function g(e,t,o,n,s){j(e)&&(e.stopPropagation(),e.preventDefault());const r=function(e){const t=e.altKey&&(e.keyCode===u.Down||e.keyCode===u.Up),o=v(e),n=e.keyCode===u.Esc||e.keyCode===u.Enter;return t||o||n}(e)&&!e.repeat;n&&!e.repeat&&f(e),r&&h(e,t,o,s)}function h(e,t,o,n){const s=e.target.value;if(o&&n){const n=o.querySelector(".dxgvCSD");n&&(o=n);const r=l(o,!1);t.invokeMethodAsync("ComboBoxVirtualScrollingProcessKey",s,e.keyCode,e.altKey,e.ctrlKey,r.requestScrollState.itemHeight,r.requestScrollState.scrollTop,r.requestScrollState.scrollHeight)}else t.invokeMethodAsync("ComboBoxProcessKey",s,e.keyCode,e.altKey,e.ctrlKey)}function v(e){return e.keyCode===u.Down||e.keyCode===u.Up||e.keyCode===u.PageUp||e.keyCode===u.PageDown||e.ctrlKey&&(e.keyCode===u.Home||e.keyCode===u.End)}function j(e){return v(e)||e.keyCode===u.Enter}function w(e,t,o){if(!t)return;const n=(new Date).getTime();t.dataset.lastLostFocusTime&&n-t.dataset.lastLostFocusTime<300&&!o||(t.dataset.lastLostFocusTime=(new Date).getTime(),e.invokeMethodAsync("OnComboBoxLostFocus",t.value))}function E(d,l,f){const y=e(d);if(!y)return;s(y);const k=l.filteringEnabled,v=e(l.inputElement),E=i(y),D=E,S=function(e){return g(e,f,D,k,l.virtualScrollingEnabled)},T=function(e){return function(e,t,o,n,s){return j(e)?(e.stopPropagation(),e.preventDefault(),e.keyCode!==u.Up&&e.keyCode!==u.Down||t.invokeMethodAsync("OnComboBoxKeyUp",e.keyCode===u.Up)):n&&p(e)&&h(e,t,o,s),!1}(e,f,D,k,l.virtualScrollingEnabled)},K=function(e){return function(e,t){b(e.target)}(e)},I=function(e){return function(e,t){const o=e.target;C(o,!0),o.dataset.timerId=setTimeout((function(){if(delete o.dataset.timerId,function(e){e&&e.dataset.bluredClass&&(e.className=e.dataset.bluredClass)}(o),document.activeElement!==o)try{w(t,o)}catch(e){}}),200)}(e,f)},x=function(e){return C(v)},P=function(e){return a(e,y,(function(){t(y)||s(y);const e=document.activeElement===v,o=v.dataset.timerId>0,n=E&&m(E);C(v),(e||o||n)&&w(f,v,!0)}))};return o(v,"keydown",S),o(v,"keyup",T),o(v,"focus",K),o(v,"blur",I),o(y,"mousedown",x),o(document,c.touchMouseDownEventName,P),r(y,(function(){n(v,"keydown",S),n(v,"keyup",T),n(v,"focus",K),n(v,"blur",I),n(y,"mousedown",x),n(document,c.touchMouseDownEventName,P)})),Promise.resolve("ok")}function D(t){if(t=e(t))return s(t),Promise.resolve("ok")}const S={init:E,dispose:D,prepareInputIfFocused:k,scrollToSelectedItem:y};export default S;export{D as dispose,E as init,k as prepareInputIfFocused,y as scrollToSelectedItem};
